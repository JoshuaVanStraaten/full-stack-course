<%- include("partials/header.ejs") %>

<section id="single-post" class="container py-5">
  <article class="bg-white p-4 p-md-5 shadow rounded">

    <!-- Title & Image Layout -->
    <div class="d-md-flex align-items-start">
      <!-- Book Cover -->
      <img src="<%= review.image_url %>"
           alt="Book cover"
           class="img-thumbnail me-md-4 mb-3"
           style="width: 160px; height: auto; max-height: 240px;">

      <!-- Title + Subtitle -->
      <div>
        <h1 class="display-5 fw-bold text-dark mb-1"><%= review.title %></h1>
        <h2 class="h5 text-muted fst-italic mb-2">by <%= review.author %></h2>
        <% if (review.subtitle) { %>
          <p class="lead text-muted mb-3"><%= review.subtitle %></p>
        <% } %>
      </div>
    </div>

    <!-- Metadata -->
    <div class="mt-3 mb-4">
      <ul class="list-unstyled text-muted small">
        <li><strong>ISBN:</strong> <%= review.isbn %></li>
        <li><strong>Date Read:</strong> <%= new Date(review.date_read).toDateString() %></li>
        <li><strong>Rating:</strong> <%= review.rating %>/10</li>
      </ul>
    </div>

    <!-- Notes Content -->
    <div class="mb-5">
      <h3 class="h5 text-dark fw-semibold mb-3">My Thoughts</h3>
      <div class="fs-5 lh-lg" style="white-space: pre-wrap;"><%= review.notes %></div>
    </div>

    <!-- Action buttons -->
    <div class="d-flex justify-content-end gap-2">
      <a href="/edit/<%= review.book_id %>" class="btn btn-outline-secondary btn-sm">
        <i class="bi bi-pencil"></i> Edit
      </a>
      <form action="/delete/<%= review.book_id %>" method="POST"
            onsubmit="return confirm('Are you sure you want to delete this post?');"
            class="m-0 p-0 d-inline">
        <button type="submit" class="btn btn-outline-danger btn-sm">
          <i class="bi bi-trash"></i> Delete
        </button>
      </form>
    </div>

  </article>
</section>

<%- include("partials/footer.ejs") %>
