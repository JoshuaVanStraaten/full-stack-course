<%- include("partials/header.ejs") %>

<h1>Let's Improve Together</h1>
<% if (blogPosts.length == 0) { %>
    <button onclick="location.href='/create'">Create a new post</button>
<% } else { %>
    <div class="blog-posts">
        <% blogPosts.forEach(post => { %>
            <div class="post">
                <h2><%= post.title %></h2>
                <p><strong><%= post.author %></strong></p>
                <!-- Only display the first 45 chars -->
                <p class="truncated-para"><%= post.content.substring(0, 45) %></p>
                <p><em><%= post.date %></em></p>
                <form action="/edit/<%= post.id %>" method="GET">
                    <button type="submit">Edit</button>
                </form>
                <form action="/delete/<%= post.id %>" method="POST">
                    <button type="submit">Delete</button>
                </form>
                <form action="/view/<%= post.id %>" method="GET">
                    <button type="submit">Read More ...</button>
                </form>
            </div>
        <% }); %>
    </div>
<% } %>

<%- include("partials/footer.ejs") %>